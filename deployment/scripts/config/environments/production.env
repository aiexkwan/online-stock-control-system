# NewPennine WMS 生產環境配置
# 這個文件包含生產環境的所有配置變量

# 基本環境設定
ENVIRONMENT=production
NODE_ENV=production
PORT=3000
HOSTNAME=0.0.0.0

# 版本信息
VERSION=1.0.0
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_TIMESTAMP=
DEPLOYMENT_COLOR=

# Supabase 配置
NEXT_PUBLIC_SUPABASE_URL=https://bbmkuiplnzvpudszrend.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
SUPABASE_DB_PASSWORD=your_db_password_here

# 應用程式配置
NEXT_PUBLIC_SITE_URL=https://your-production-domain.com
NEXT_PUBLIC_API_URL=https://your-production-domain.com/api
NEXT_PUBLIC_ENVIRONMENT=production

# 安全配置
JWT_SECRET=your_jwt_secret_here
NEXTAUTH_SECRET=your_nextauth_secret_here
NEXTAUTH_URL=https://your-production-domain.com

# 郵件配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
FROM_EMAIL=noreply@your-domain.com

# Redis 配置
REDIS_URL=redis://newpennine-redis:6379
REDIS_PASSWORD=your_redis_password

# 監控配置
ENABLE_MONITORING=true
PROMETHEUS_ENDPOINT=http://localhost:9090
GRAFANA_ENDPOINT=http://localhost:3000

# 日誌配置
LOG_LEVEL=info
LOG_FORMAT=json
LOG_ROTATION=daily
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=30

# 性能配置
CACHE_TTL=3600
MAX_CONNECTIONS=100
REQUEST_TIMEOUT=30000
BODY_SIZE_LIMIT=50MB

# 功能開關
ENABLE_ANALYTICS=true
ENABLE_FEATURE_FLAGS=true
ENABLE_RATE_LIMITING=true
ENABLE_CSRF_PROTECTION=true

# 部署配置
DEPLOYMENT_STRATEGY=blue-green
HEALTH_CHECK_PATH=/api/v1/health
READINESS_PROBE_PATH=/api/v1/ready
LIVENESS_PROBE_PATH=/api/v1/health

# 備份配置
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# 告警配置
ALERT_ENABLED=true
ALERT_EMAIL=admin@your-domain.com
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/your/webhook/url
ALERT_WEBHOOK_URL=https://your-monitoring-system.com/webhook

# 資料庫配置
DB_POOL_SIZE=20
DB_TIMEOUT=30000
DB_SSL=true
DB_RETRY_ATTEMPTS=3

# 檔案上傳配置
UPLOAD_MAX_SIZE=50MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,application/pdf
UPLOAD_STORAGE_PATH=/uploads

# 安全標頭
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
X_FRAME_OPTIONS=SAMEORIGIN

# 第三方服務
OPENAI_API_KEY=your_openai_api_key
ANTHROPIC_API_KEY=your_anthropic_api_key

# 網路配置
NETWORK_TIMEOUT=30000
NETWORK_RETRY_ATTEMPTS=3
NETWORK_RETRY_DELAY=1000

# 緩存配置
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_COMPRESSION=true

# 會話配置
SESSION_TIMEOUT=3600
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# 跨域配置
CORS_ENABLED=true
CORS_ORIGINS=https://your-production-domain.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# 壓縮配置
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# 靜態資源配置
STATIC_CACHE_MAX_AGE=31536000
STATIC_COMPRESSION=true
STATIC_ETAG=true

# API 限制
API_RATE_LIMIT=100
API_RATE_WINDOW=60000
API_BURST_LIMIT=200

# 健康檢查配置
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# 部署超時設定
DEPLOYMENT_TIMEOUT=600
ROLLBACK_TIMEOUT=300
HEALTH_CHECK_STARTUP_TIMEOUT=120

# 容器配置
CONTAINER_MEMORY_LIMIT=1GB
CONTAINER_CPU_LIMIT=1000m
CONTAINER_RESTART_POLICY=unless-stopped

# 日誌配置
LOG_DRIVER=json-file
LOG_MAX_SIZE=10m
LOG_MAX_FILE=3

# 網路配置
NETWORK_NAME=newpennine-network
NETWORK_DRIVER=bridge
NETWORK_SUBNET=172.20.0.0/16

# 卷配置
VOLUME_DRIVER=local
VOLUME_BACKUP_PATH=/backup
VOLUME_DATA_PATH=/data

# 監控閾值
CPU_THRESHOLD=80
MEMORY_THRESHOLD=80
DISK_THRESHOLD=85
RESPONSE_TIME_THRESHOLD=2000
ERROR_RATE_THRESHOLD=5

# 自動修復配置
AUTO_HEALING_ENABLED=true
AUTO_SCALING_ENABLED=false
AUTO_BACKUP_ENABLED=true
AUTO_CLEANUP_ENABLED=true