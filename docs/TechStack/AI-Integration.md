# AI 整合 (AI Integration)

_最後更新日期: 2025-08-27 10:42:20_

## 模型與 SDK

- **使用模型**: OpenAI GPT-4o-mini, GPT-4o, GPT-3.5-turbo
- **SDK**: openai 4.104.0, @anthropic-ai/sdk 0.40.1

### 模型選用策略

- **`GPT-4o-mini`**: 作為大部分常規任務的首選模型，在成本和性能之間取得了最佳平衡，用於聊天機器人的即時響應等場景。
- **`GPT-4o`**: 用於需要高質量、複雜推理能力的任務，例如 `ask-database` 的自然語言轉 SQL 查詢。
- **`GPT-3.5-turbo`**: 在對成本極度敏感且任務相對簡單的場景下作為備用選項。

## 核心功能詳解

- **聊天機器人**: `ChatbotCard`
  - **職責**: 一個可重用的 React 組件，封裝了與 OpenAI API 的對話邏輯。它負責管理對話歷史、處理用戶輸入，並以流式 (streaming) 方式顯示 AI 的響應。
  - **應用場景**: 在系統的多個頁面中提供即時的 AI 客戶支持和問題解答。

- **資料庫查詢**: `ask-database` API
  - **職責**: 一個後端 API 端點 (`/api/ask-database`)，它接收用戶的自然語言問題（例如「最近一周有多少個新訂單？」），利用 `GPT-4o` 將問題轉換為安全的 SQL 查詢，然後執行該查詢並返回結果。
  - **安全機制**: 該 API 內置了嚴格的安全檢查，確保生成的 SQL 只包含 `SELECT` 語句，並限制查詢的範圍，防止惡意查詢。

- **文件分析**: PDF 分析服務
  - **職責**: 一個後端服務，能夠接收用戶上傳的 PDF 文件（例如供應商的發貨單），提取其中的結構化數據（如產品名稱、數量、日期），並將其轉換為系統可以處理的 JSON 格式。
  - **應用場景**: 自動化數據錄入，減少人工操作，例如在收貨時快速處理 GRN (Goods Received Note)。
