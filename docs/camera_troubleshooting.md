# 相機功能故障排除指南

## 現狀確認

✅ **您的開發服務器已正常運行**
- 地址：`http://localhost:3000`
- 狀態：正常編譯和運行
- 用戶認證：已通過

## 相機功能測試步驟

### 1. 訪問測試頁面
1. 打開瀏覽器訪問：`http://localhost:3000/stock-take/cycle-count`
2. 點擊 **"Test Camera"** 按鈕
3. 查看相機診斷結果

### 2. 相機診斷檢查項目
- ✅ **Browser Support** - 瀏覽器是否支持相機 API
- ✅ **HTTPS Connection** - localhost 被視為安全連接
- 📷 **Camera Devices Found** - 檢測到的相機數量
- 🔐 **Camera Permission** - 相機權限狀態

### 3. 常見問題解決

#### 問題：瀏覽器提示相機權限
**解決方案：**
1. 點擊瀏覽器地址欄左側的 🔒 或 🛡️ 圖標
2. 找到 "相機" 或 "Camera" 選項
3. 選擇 "允許" 或 "Allow"
4. 刷新頁面

#### 問題：找不到相機設備
**解決方案：**
1. 確保設備有攝像頭
2. 檢查其他應用是否正在使用相機
3. 重啟瀏覽器
4. 檢查設備管理器中的相機狀態

#### 問題：相機權限被拒絕
**解決方案：**
1. 清除瀏覽器的網站數據和權限
2. 重新訪問頁面並允許權限
3. 檢查瀏覽器設置中的相機權限

### 4. 瀏覽器兼容性

#### ✅ 推薦瀏覽器
- **Chrome** 87+ (最佳支持)
- **Edge** 87+
- **Firefox** 85+
- **Safari** 14+ (macOS/iOS)

#### ⚠️ 注意事項
- 某些企業網絡可能阻止相機訪問
- 防病毒軟件可能阻止相機權限
- 虛擬機環境可能無法正常訪問相機

### 5. 測試流程

1. **基礎測試**
   ```
   訪問 /stock-take/cycle-count
   → 點擊 "Test Camera"
   → 檢查診斷結果
   ```

2. **權限測試**
   ```
   點擊 "Test Camera"
   → 允許相機權限
   → 查看視頻預覽
   ```

3. **QR 掃描測試**
   ```
   點擊 "Start Scanning"
   → 允許相機權限
   → 掃描 QR 碼
   ```

### 6. 開發環境說明

- **HTTP localhost** - 現代瀏覽器允許 localhost 上的相機訪問
- **無需 HTTPS** - localhost 被視為安全上下文
- **自動權限** - 某些瀏覽器會記住 localhost 的權限設置

## 下一步操作

1. **立即測試**：訪問 `http://localhost:3000/stock-take/cycle-count`
2. **點擊測試**：使用 "Test Camera" 功能
3. **查看結果**：檢查所有診斷項目是否通過
4. **報告問題**：如果仍有問題，請提供具體的錯誤信息

## 技術支持

如果相機功能仍然無法正常工作，請提供以下信息：
- 瀏覽器類型和版本
- 操作系統版本
- 相機診斷測試的具體結果
- 瀏覽器控制台的錯誤信息 