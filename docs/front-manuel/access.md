# 權限驗證頁面操作手冊

## 頁面概述
權限驗證頁面（Access Page）係登入成功後嘅中轉站。呢個頁面會驗證你嘅身份同權限，然後自動將你導向到適合你角色嘅系統頁面。

## 頁面功能

### 1. 身份驗證
- 確認你已經成功登入
- 驗證你嘅電郵域名（必須係 @pennineindustries.com）
- 檢查你嘅用戶角色同權限

### 2. 自動導航
- 根據你嘅用戶角色決定目標頁面
- 預設導向到管理分析頁面（/admin/analysis）
- 3 秒倒計時後自動跳轉

## 操作流程

### 1. 進入權限頁面

正常情況下，你會喺以下情況進入呢個頁面：
- 成功登入後自動跳轉
- 從系統其他頁面導航過嚟
- 直接訪問 `/access` 路徑（需要已登入）

### 2. 頁面載入過程

#### 載入中狀態
- 顯示「Verifying access...」
- 系統正在檢查你嘅登入狀態同權限

#### 驗證成功
當驗證通過後，頁面會顯示：
- 綠色打勾圖示 ✓
- **「Access Granted」** 標題
- 你嘅登入電郵地址
- Session 有效期資訊
- 倒計時顯示

#### 驗證失敗
如果驗證失敗：
- 自動跳轉返登入頁面
- 可能嘅錯誤代碼：
  - `access_denied` - 未登入
  - `unauthorized_domain` - 電郵域名錯誤
  - `auth_check_failed` - 驗證過程出錯

### 3. 自動跳轉機制

#### 倒計時顯示
- 大圓圈顯示剩餘秒數（3, 2, 1）
- 文字提示「Redirecting in X seconds...」
- 倒計時結束後顯示「Redirecting...」

#### 手動操作
- 可以等待自動跳轉
- 或者按「← Back to Login」返回登入頁面

## 頁面資訊顯示

### 1. 系統訪問確認
顯示以下資訊確認你嘅訪問權限：
- ✓ Authenticated as: [你嘅電郵地址]
- ✓ Session expires in [X] hours

### 2. 歡迎訊息
- 「Welcome to Pennine Industries Stock Control System」
- 確認你已獲得系統訪問權限

## 用戶角色同目標頁面

系統會根據你嘅角色導向到不同頁面：
- **管理員** → 管理分析頁面
- **倉庫員工** → 相應嘅操作頁面
- **其他角色** → 預設管理頁面

## 注意事項

1. **自動跳轉**
   - 正常情況下會在 3 秒內自動跳轉
   - 如果超過 10 秒未跳轉，可能有技術問題

2. **Session 管理**
   - 注意 session 有效期
   - 通常為幾小時，過期需要重新登入

3. **瀏覽器要求**
   - 需要啟用 JavaScript
   - 建議使用最新版本瀏覽器

## 常見問題

**問：點解我會返到登入頁面？**
答：可能原因：
- Session 已過期
- 未正確登入
- 使用咗錯誤嘅電郵域名

**問：可唔可以跳過倒計時？**
答：暫時冇提供跳過功能，但 3 秒好快就過。

**問：點解一直顯示「Verifying access...」？**
答：可能係網絡問題或系統繁忙，請重新整理頁面或稍後再試。

## 視覺指引

### 驗證中狀態
```
┌─────────────────────────────────────┐
│                                     │
│         Verifying access...         │
│              ⟳                      │
│                                     │
└─────────────────────────────────────┘
```

### 成功驗證頁面
```
┌─────────────────────────────────────┐
│              ✓                      │
│         Access Granted              │
│                                     │
│   Welcome to Pennine Industries     │
│    Stock Control System             │
│                                     │
│  ┌─────────────────────────────┐    │
│  │   System Access Confirmed    │    │
│  │                              │    │
│  │ ✓ Authenticated as:          │    │
│  │   john@pennineindustries.com │    │
│  │                              │    │
│  │ ✓ Session expires in 8 hours │    │
│  └─────────────────────────────┘    │
│                                     │
│           ┌───┐                     │
│           │ 3 │                     │
│           └───┘                     │
│                                     │
│   Redirecting in 3 seconds...       │
│   You will be automatically taken   │
│   to the dashboard                  │
│                                     │
│       ← Back to Login               │
│                                     │
└─────────────────────────────────────┘
```

### 重定向中狀態
```
┌─────────────────────────────────────┐
│              ⟳                      │
│         Redirecting...              │
│    Taking you to the dashboard      │
│                                     │
└─────────────────────────────────────┘
```

## 安全提示

1. **唔好分享連結**
   - Access 頁面 URL 可能包含 session 資訊
   - 避免將 URL 發送俾他人

2. **定期登出**
   - 使用完系統後記得登出
   - 特別係使用公共電腦時

3. **留意 Session**
   - 注意 session 過期時間
   - 長時間唔使用會自動登出

## 技術支援
如果遇到任何問題，請聯絡：
- IT 部門：ext. 1234
- 電郵：it.support@pennineindustries.com
- 系統管理員：ext. 5678