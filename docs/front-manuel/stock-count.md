# 庫存盤點功能 - 操作手冊

## 概述

庫存盤點功能係用嚟核實實際庫存同系統記錄是否一致嘅重要工具。系統支援兩種盤點模式：**單次掃描模式**同**批量掃描模式**，可以根據實際需要靈活選擇。

## 進入方式

1. 登入系統後，進入管理員頁面
2. 喺地址欄輸入 `/admin/stock-count` 或
3. 從管理員儀表板嘅「庫存管理」區域點擊「庫存盤點」

## 操作界面介紹

### 主要元素

```
┌─────────────────────────────────────────────┐
│          [批量模式開關按鈕]                   │
│                                             │
│  ┌───────────────────────────────────┐      │
│  │                                   │      │
│  │      掃描區域（QR Code）           │      │
│  │                                   │      │
│  └───────────────────────────────────┘      │
│                                             │
│          [剩餘數量顯示區]                    │
│                                             │
└─────────────────────────────────────────────┘
```

## 操作模式詳解

### 一、單次掃描模式（預設模式）

#### 適用場景
- 少量貨物盤點
- 需要即時確認每個棧板
- 初次使用系統嘅用戶

#### 操作流程

1. **開始掃描**
   - 將掃描槍對準棧板上嘅 QR Code
   - 聽到「嘟」一聲表示掃描成功
   - 系統會自動讀取棧板信息

2. **系統處理**
   - **情況 A - 自動更新**：
     - 如果該產品今日已經有盤點記錄
     - 系統會自動扣減數量
     - 顯示「Count updated successfully!」
     - 顯示更新後嘅剩餘數量

   - **情況 B - 需要輸入數量**：
     - 如果係今日第一次盤點該產品
     - 會彈出數字鍵盤
     - 顯示當前庫存數量作參考

3. **輸入盤點數量**（如需要）
   - 使用彈出嘅數字鍵盤輸入實際盤點數量
   - 點擊「確認」提交
   - 點擊「取消」放棄本次盤點

4. **查看結果**
   - 系統顯示剩餘數量
   - 顯示產品編號同描述
   - 準備掃描下一個棧板

5. **繼續盤點**
   - 點擊「Scan Next Pallet」按鈕
   - 重複以上步驟

---

### 二、批量掃描模式

#### 適用場景
- 大量貨物需要盤點
- 同一區域有多個棧板
- 需要提高盤點效率

#### 開啟批量模式

1. **啟用方法**
   - 點擊頁面上方嘅「Enable Batch Mode」按鈕
   - 按鈕會變成綠色，顯示「Exit Batch Mode」
   - 出現提示文字：「批量模式已啟用」

2. **批量模式特點**
   - 可以連續掃描多個棧板
   - 集中輸入數量
   - 最後統一提交

#### 批量操作流程

1. **連續掃描**
   - 逐個掃描需要盤點嘅棧板
   - 每次掃描後會彈出數字鍵盤
   - 輸入該棧板嘅實際數量

2. **查看批量清單**
   - 頁面會顯示「批量掃描清單」
   - 顯示已掃描嘅棧板數量
   - 每個項目顯示：
     - 產品編號
     - 棧板編號
     - 產品描述
     - 輸入嘅數量
     - 當前庫存（如有）

3. **編輯功能**
   - **修改數量**：
     - 點擊項目旁邊嘅編輯按鈕（鉛筆圖標）
     - 重新輸入正確數量
     - 點擊確認更新

   - **刪除項目**：
     - 點擊項目旁邊嘅刪除按鈕（垃圾桶圖標）
     - 該項目會從批量清單中移除

4. **提交批量數據**
   - 確認所有數據正確後
   - 點擊「Submit Batch (X items)」按鈕
   - 系統會批量處理所有盤點數據

5. **查看處理結果**
   - 成功提示：「Processed X items successfully」
   - 如有失敗項目：「X items failed」
   - 批量清單會自動清空
   - 準備下一批盤點

6. **退出批量模式**
   - 點擊「Exit Batch Mode」按鈕
   - 返回單次掃描模式
   - 未提交嘅數據會被清除

## 數字鍵盤使用

### 界面說明
```
┌─────────────────────────┐
│   產品: ABC123          │
│   棧板: PLT001          │
│   當前庫存: 500         │
├─────────────────────────┤
│  ┌───┐ ┌───┐ ┌───┐     │
│  │ 7 │ │ 8 │ │ 9 │     │
│  └───┘ └───┘ └───┘     │
│  ┌───┐ ┌───┐ ┌───┐     │
│  │ 4 │ │ 5 │ │ 6 │     │
│  └───┘ └───┘ └───┘     │
│  ┌───┐ ┌───┐ ┌───┐     │
│  │ 1 │ │ 2 │ │ 3 │     │
│  └───┘ └───┘ └───┘     │
│  ┌───────┐ ┌───┐       │
│  │   0   │ │ ← │       │
│  └───────┘ └───┘       │
│                         │
│  [取消]    [確認]       │
└─────────────────────────┘
```

### 操作說明
1. **輸入數字**：點擊相應數字按鈕
2. **刪除數字**：點擊退格鍵（←）
3. **確認輸入**：點擊「確認」按鈕
4. **取消操作**：點擊「取消」按鈕

## 特殊情況處理

### 1. 重複掃描
- **單次模式**：如果棧板已經盤點過，會顯示錯誤提示
- **批量模式**：系統會提示「This pallet is already in the batch list」

### 2. 數量驗證
系統會自動驗證輸入嘅數量：
- **異常數量警告**：
  - 如果數量同歷史記錄相差太大
  - 會彈出確認對話框
  - 可以選擇繼續或重新輸入

### 3. 首次盤點提示
- 當產品今日第一次盤點時
- 系統會顯示：「First count for [產品編號]. Current stock: [當前庫存]」
- 幫助用戶了解當前庫存情況

### 4. 錯誤處理
- **掃描失敗**：檢查 QR Code 是否清晰
- **網絡錯誤**：檢查網絡連接，重試操作
- **提交失敗**：記錄錯誤信息，聯絡 IT 支援

## 狀態指示器

批量模式下，每個項目會顯示狀態圖標：

- 🕐 **黃色時鐘圖標**：待處理
- ✅ **綠色勾號圖標**：處理成功
- ❌ **紅色叉號圖標**：處理失敗

## 操作建議

### 提高效率嘅技巧

1. **預先準備**
   - 將需要盤點嘅貨物集中擺放
   - 確保 QR Code 清晰可見
   - 準備好實際數量記錄

2. **批量模式使用時機**
   - 同一區域有 5 個或以上棧板時
   - 需要快速完成大量盤點時
   - 有助手協助記錄數量時

3. **數據準確性**
   - 仔細核對輸入嘅數量
   - 利用編輯功能修正錯誤
   - 提交前再次檢查清單

### 注意事項

1. **權限要求**
   - 需要有庫存盤點權限
   - 某些產品可能需要特殊權限

2. **時間限制**
   - 盤點數據以日為單位
   - 跨日需要重新開始

3. **數據同步**
   - 盤點結果即時更新到系統
   - 其他用戶可以即時睇到更新

## 常見問題

### Q1: 點解要輸入數量？
**答**：首次盤點某產品時，系統需要知道實際剩餘數量，之後再掃描同一產品會自動扣減。

### Q2: 批量模式最多可以掃幾多個？
**答**：理論上無限制，但建議每批不超過 50 個，避免一次過處理太多數據。

### Q3: 如果輸入錯誤數量點算？
**答**：
- 批量模式：使用編輯功能修改
- 單次模式：需要聯絡管理員調整

### Q4: 可唔可以查看盤點記錄？
**答**：可以，請到系統功能區生成「庫存盤點報告」查看詳細記錄。

### Q5: 盤點時發現實物同系統差異好大點辦？
**答**：
1. 再次確認實物數量
2. 檢查是否有未入賬嘅出入庫
3. 如確認有差異，照實輸入
4. 系統會記錄差異供後續分析

## 故障排除

### 掃描槍無反應
1. 檢查掃描槍連接
2. 確認掃描槍電量
3. 嘗試手動輸入棧板編號

### 頁面加載緩慢
1. 檢查網絡連接
2. 清理瀏覽器緩存
3. 使用 Chrome 或 Edge 瀏覽器

### 數據提交失敗
1. 記錄錯誤信息
2. 檢查網絡狀態
3. 聯絡 IT 部門

---

如需要更多協助，請聯絡倉庫主管或 IT 支援部門。記住，準確嘅庫存盤點對整個供應鏈管理非常重要！