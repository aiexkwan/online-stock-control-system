# GraphQL 監控儀表板 - 操作手冊

## 概述

GraphQL 監控儀表板係一個專門用嚟監測系統性能同健康狀態嘅工具。雖然呢個頁面包含一啲技術指標，但佢可以幫助管理人員了解系統運行情況，及時發現問題。

## 進入方式

1. 登入管理員帳戶
2. 喺瀏覽器地址欄輸入 `/admin/graphql-monitor`
3. 或從系統管理頁面點擊「系統監控」連結

## 界面概覽

監控儀表板分為以下幾個主要部分：

```
┌─────────────────────────────────────────────────────┐
│  GraphQL Monitoring Dashboard                       │
│  系統健康狀態: ✅ 健康 | ⚠️ 警告 | ❌ 危急          │
├─────────────────────────────────────────────────────┤
│  [自動刷新開關]  [手動刷新]  [優化緩存]  [重置指標]  │
├─────────────────────────────────────────────────────┤
│  系統運行時間 | 記憶體使用 | 回應時間 | 錯誤率      │
├─────────────────────────────────────────────────────┤
│  [速率限制] [緩存性能] [預熱策略] [分析] [性能測試]   │
└─────────────────────────────────────────────────────┘
```

## 系統健康狀態

### 狀態指示器

系統健康狀態會顯示喺頁面頂部，有三種狀態：

1. **✅ 健康 (HEALTHY)**
   - 顏色：綠色
   - 含義：系統運行正常，所有指標都喺正常範圍內

2. **⚠️ 警告 (WARNING)**
   - 顏色：黃色
   - 含義：某些指標接近警戒線，需要留意

3. **❌ 危急 (CRITICAL)**
   - 顏色：紅色
   - 含義：系統出現嚴重問題，需要立即處理

### 關鍵指標說明

#### 1. 系統運行時間 (Uptime)
- **顯示格式**：X天X小時X分鐘
- **含義**：系統持續運行嘅時間
- **正常值**：越長越好，表示系統穩定

#### 2. 記憶體使用 (Memory Usage)
- **顯示格式**：XXX MB / X GB
- **含義**：系統使用嘅記憶體量
- **注意**：如果接近上限，可能需要優化

#### 3. 平均回應時間 (Avg Response Time)
- **顯示格式**：XXX 毫秒
- **含義**：系統處理請求嘅平均時間
- **理想值**：< 200 毫秒

#### 4. 錯誤率 (Error Rate)
- **顯示格式**：X.XX%
- **含義**：請求失敗嘅百分比
- **理想值**：< 1%

## 功能標籤頁詳解

### 1. 速率限制 (Rate Limiting) 標籤

#### 用途
防止系統被過度使用，保護系統穩定性。

#### 主要內容

**A. 請求統計**
- **總請求數**：顯示系統收到嘅所有請求
- **被阻擋請求**：因超過限制而被拒絕嘅請求
- **活躍連接數**：當前正在處理嘅連接

**B. 被阻擋 IP 列表**
- 顯示經常超過限制嘅 IP 地址
- 可以幫助識別異常使用模式

#### 如何解讀
- 如果被阻擋請求過多，可能需要調整限制
- 如果某個 IP 頻繁被阻擋，需要調查原因

---

### 2. 緩存性能 (Cache Performance) 標籤

#### 用途
監控系統緩存效率，緩存可以加快系統回應速度。

#### 主要指標

**A. 緩存命中率**
- **顯示方式**：百分比同進度條
- **含義**：成功從緩存獲取數據嘅比例
- **理想值**：> 80%
- **低命中率影響**：系統變慢，需要優化

**B. 緩存大小**
- **顯示格式**：XX MB / GB
- **含義**：緩存佔用嘅空間
- **注意**：過大可能浪費資源

**C. 性能趨勢**
- **綠色向上箭頭**：性能改善中
- **紅色向下箭頭**：性能下降，需要關注

#### 查詢性能列表

**高性能查詢**（綠色標籤）
- 呢啲查詢緩存效果好
- 系統處理得快

**需要優化查詢**（紅色標籤）
- 呢啲查詢緩存效果差
- 可能需要技術團隊優化

---

### 3. 預熱策略 (Warmup Strategies) 標籤

#### 用途
系統啟動時預先載入重要數據，提高初期性能。

#### 顯示內容

**A. 活躍預熱**
- 顯示正在執行嘅預熱任務數量

**B. 今日完成**
- 已完成嘅預熱次數

**C. 成功率**
- 預熱任務嘅成功百分比
- 理想值：> 95%

**D. 策略狀態列表**
每個預熱策略顯示：
- **名稱**：策略嘅名稱
- **最後運行**：上次執行時間
- **耗時**：執行所需時間
- **狀態**：成功（綠色）或失敗（紅色）

---

### 4. 分析 (Analytics) 標籤

#### 用途
提供詳細嘅性能分析圖表，幫助了解系統趨勢。

#### 圖表說明

**A. 回應時間趨勢圖**
- **圖表類型**：折線圖
- **橫軸**：時間
- **縱軸**：回應時間（毫秒）
- **如何解讀**：
  - 平穩嘅線表示系統穩定
  - 突然上升表示可能有問題

**B. 緩存命中率與錯誤率圖**
- **圖表類型**：區域圖
- **綠色區域**：緩存命中率（越高越好）
- **紅色區域**：錯誤率（越低越好）

**C. 吞吐量分析**
- **圖表類型**：柱狀圖
- **含義**：每秒處理嘅請求數
- **用途**：了解系統負載情況

**D. 實時性能指標**
顯示各項性能指標嘅當前值：
- **查詢複雜度**：當前查詢嘅複雜程度
- **數據加載效率**：數據讀取嘅效率
- **預載準確度**：預載數據嘅準確性
- **緩存記憶體使用**：緩存佔用嘅記憶體

---

### 5. 性能測試 (Performance Test) 標籤

#### 用途
運行自動化測試，檢查系統性能。

#### 測試控制面板

**A. 測試場景選擇**
- **基本查詢測試**：測試簡單操作
- **負載測試（100用戶）**：模擬正常使用
- **壓力測試（500用戶）**：測試極限性能
- **尖峰測試**：測試突發流量

**B. 測試參數**
- **持續時間**：測試運行多久（秒）
- **目標 RPS**：每秒請求數目標

**C. 操作按鈕**
- **運行測試**：開始執行測試
- **計劃測試**：安排將來執行
- **查看歷史**：查看過往測試結果

#### 測試結果解讀

**測試狀態**
- ✅ **通過**：所有指標達標
- ❌ **失敗**：某些指標未達標

**關鍵指標**
- **回應時間（P95）**：95% 請求嘅回應時間
- **吞吐量**：實際每秒處理請求數
- **錯誤率**：失敗請求百分比

## 控制按鈕功能

### 1. 自動刷新開關
- **開啟時**：每 30 秒自動更新數據
- **關閉時**：需要手動刷新
- **建議**：平時開啟，查看詳細數據時關閉

### 2. 手動刷新
- 點擊立即更新所有數據
- 用於需要查看最新狀態時

### 3. 優化緩存
- **功能**：自動清理同優化緩存
- **使用時機**：
  - 緩存命中率下降時
  - 系統變慢時
  - 定期維護（如每週一次）

### 4. 重置指標
- **功能**：清空統計數據，重新開始計算
- **使用時機**：
  - 系統更新後
  - 開始新嘅監測週期
  - 排除歷史數據影響

## 使用建議

### 日常監控

1. **每日檢查清單**
   - [ ] 查看系統健康狀態
   - [ ] 檢查錯誤率是否正常
   - [ ] 查看有無異常 IP
   - [ ] 確認緩存命中率 > 80%

2. **週期性維護**
   - 每週運行一次性能測試
   - 每月優化一次緩存
   - 季度分析性能趨勢

### 問題處理指引

#### 情況一：系統變慢
1. 檢查回應時間趨勢
2. 查看緩存命中率
3. 運行基本性能測試
4. 如問題持續，聯絡技術團隊

#### 情況二：錯誤率上升
1. 查看錯誤率圖表
2. 檢查被阻擋 IP 列表
3. 查看最近嘅系統更改
4. 記錄詳情並報告

#### 情況三：緩存效率低
1. 點擊「優化緩存」
2. 查看需要優化嘅查詢列表
3. 等待優化完成
4. 觀察命中率變化

## 性能優化建議

### 1. 當回應時間 > 500ms
- 可能原因：系統負載過高
- 建議行動：
  - 檢查同時在線用戶數
  - 考慮限制某些大型查詢
  - 聯絡技術團隊評估

### 2. 當緩存命中率 < 60%
- 可能原因：查詢模式改變
- 建議行動：
  - 運行緩存優化
  - 調整預熱策略
  - 分析查詢模式

### 3. 當錯誤率 > 5%
- 可能原因：系統問題或攻擊
- 建議行動：
  - 立即通知技術團隊
  - 檢查系統日誌
  - 考慮啟動應急預案

## 報告生成

### 生成性能報告

1. **操作步驟**
   - 選擇需要嘅時間範圍
   - 點擊「查看詳細報告」
   - 選擇報告格式（PDF/Excel）
   - 下載報告

2. **報告內容**
   - 系統健康總結
   - 性能趨勢分析
   - 問題同建議
   - 詳細數據表格

### 報告用途
- 定期向管理層匯報
- 性能改進依據
- 問題追蹤記錄
- 系統升級參考

## 常見問題

### Q1: 需唔需要每日查看監控頁面？
**答**：建議每日至少查看一次，特別係早上開始工作時，確保系統正常運行。

### Q2: 見到黃色警告應該點做？
**答**：黃色警告表示需要留意，但唔係緊急問題。記錄低警告內容，如持續出現就需要處理。

### Q3: 性能測試會唔會影響正常使用？
**答**：基本測試影響好細，但壓力測試可能會令系統變慢。建議喺非繁忙時間進行。

### Q4: 優化緩存要幾耐？
**答**：通常幾分鐘內完成。期間系統可能稍微變慢，建議喺用戶較少時執行。

### Q5: 點解有時自動刷新會停止？
**答**：可能係網絡問題或瀏覽器限制。嘗試手動刷新或重新載入頁面。

## 緊急聯絡

如遇到以下情況，請立即聯絡技術支援：

- 系統健康狀態顯示「危急」超過 5 分鐘
- 錯誤率突然飆升至 10% 以上
- 多個性能指標同時異常
- 性能測試全部失敗

**技術支援熱線**：[請填寫實際聯絡方式]
**緊急郵箱**：[請填寫實際郵箱]

---

記住，監控儀表板係保障系統穩定運行嘅重要工具。定期查看同及時處理問題，可以確保整個倉庫管理系統順暢運作。