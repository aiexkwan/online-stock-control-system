/**
 * Unified Dashboard CSS
 * Consolidated from multiple gridstack CSS files
 * Organized structure: Base Grid → Grid Items → Widget Container → Edit Mode → Special States
 */

/* ===========================
   1. BASE GRID SETUP
   =========================== */

/* Grid Container */
.grid-stack {
  position: relative;
  margin: 0 auto;
  background: linear-gradient(
    135deg,
    rgba(15, 23, 42, 0.9) 0%,
    rgba(30, 41, 59, 0.9) 100%
  );
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 12px;
  padding: 16px;
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.3),
    0 4px 6px -2px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  min-height: 600px;
}

/* Ensure 15 columns × 13 rows as specified */
.grid-stack > .grid-stack-item {
  min-width: 6.6667%;
  position: absolute;
}

/* ===========================
   2. GRID ITEMS (TRANSPARENT)
   =========================== */

/* Make all grid-stack-items completely transparent - they're just positioning containers */
.grid-stack-item {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
  overflow: visible !important;
}

.grid-stack-item::before,
.grid-stack-item::after {
  display: none !important;
}

/* Remove any hover effects on the outer container */
.grid-stack-item:hover {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Hide nested grid-stack-items (double layer issue) */
.grid-stack-item .grid-stack-item {
  display: none !important;
}

/* ===========================
   3. GRID ITEM CONTENT
   =========================== */

.grid-stack-item-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible;
  padding: 0;
  margin: 0;
  background: transparent;
  border: none;
  inset: 0 !important;
}

/* ===========================
   4. WIDGET CONTAINER (VISUAL STYLES)
   =========================== */

/* All visual styles go on the widget-container-wrapper */
.widget-container-wrapper {
  width: 100%;
  height: 100%;
  background: linear-gradient(
    135deg,
    rgba(30, 41, 59, 0.95) 0%,
    rgba(51, 65, 85, 0.95) 100%
  );
  border: 1px solid rgba(99, 102, 241, 0.3);
  border-radius: 8px;
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.2),
    0 2px 4px -1px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  position: relative;
  display: flex;
  flex-direction: column;
  transition: all 0.3s ease;
  overflow: hidden;
}

/* Widget hover effect */
.widget-container-wrapper:hover {
  border-color: rgba(99, 102, 241, 0.5);
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.3),
    0 4px 6px -2px rgba(0, 0, 0, 0.15),
    0 0 0 1px rgba(99, 102, 241, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
}

/* Widget content area */
.widget-content {
  flex: 1;
  overflow: auto;
  padding: 16px;
  position: relative;
}

/* ===========================
   5. EDIT MODE STYLES
   =========================== */

/* Edit mode indicator */
.gridstack-dashboard.edit-mode .grid-stack {
  border-color: rgba(168, 85, 247, 0.4);
  background: linear-gradient(
    135deg,
    rgba(15, 23, 42, 0.95) 0%,
    rgba(30, 41, 59, 0.95) 100%
  );
}

/* Edit mode widget styling */
.edit-mode .widget-container-wrapper {
  cursor: move;
  border-color: rgba(168, 85, 247, 0.4);
  background: linear-gradient(
    135deg,
    rgba(30, 41, 59, 0.98) 0%,
    rgba(51, 65, 85, 0.98) 100%
  );
}

.edit-mode .widget-container-wrapper:hover {
  border-color: rgba(168, 85, 247, 0.6);
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.4),
    0 4px 6px -2px rgba(0, 0, 0, 0.2),
    0 0 0 2px rgba(168, 85, 247, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Widget size badge */
.widget-size-badge {
  background: rgba(99, 102, 241, 0.9);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.5px;
  backdrop-filter: blur(8px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Remove button */
.widget-remove-btn {
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(8px);
}

.widget-remove-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
}

/* ===========================
   6. RESIZE HANDLES
   =========================== */

.grid-stack-item > .ui-resizable-handle {
  display: none;
}

.edit-mode .grid-stack-item > .ui-resizable-se {
  display: block !important;
  position: absolute;
  bottom: 0;
  right: 0;
  width: 20px;
  height: 20px;
  cursor: se-resize;
  z-index: 90;
  background: transparent;
}

.edit-mode .grid-stack-item > .ui-resizable-se::after {
  content: '';
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 0 0 10px 10px;
  border-color: transparent transparent rgba(168, 85, 247, 0.6) transparent;
  transition: border-color 0.2s ease;
}

.edit-mode .grid-stack-item:hover > .ui-resizable-se::after {
  border-color: transparent transparent rgba(168, 85, 247, 0.9) transparent;
}

/* ===========================
   7. DRAGGING & PLACEHOLDER
   =========================== */

.grid-stack-item.ui-draggable-dragging {
  z-index: 100;
}

.grid-stack-item.ui-draggable-dragging .widget-container-wrapper {
  opacity: 0.8;
  transform: scale(1.02);
  box-shadow:
    0 20px 25px -5px rgba(0, 0, 0, 0.4),
    0 10px 10px -5px rgba(0, 0, 0, 0.2),
    0 0 0 2px rgba(168, 85, 247, 0.5);
}

.grid-stack-placeholder > .placeholder-content {
  background: rgba(168, 85, 247, 0.1);
  border: 2px dashed rgba(168, 85, 247, 0.5);
  border-radius: 8px;
}

/* ===========================
   8. SCROLLBAR STYLING
   =========================== */

.widget-content::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.widget-content::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
}

.widget-content::-webkit-scrollbar-thumb {
  background: rgba(99, 102, 241, 0.3);
  border-radius: 4px;
  transition: background 0.2s ease;
}

.widget-content::-webkit-scrollbar-thumb:hover {
  background: rgba(99, 102, 241, 0.5);
}

/* ===========================
   9. ANIMATIONS
   =========================== */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.grid-stack-item {
  animation: fadeIn 0.3s ease-out;
}

/* ===========================
   10. UTILITY CLASSES
   =========================== */

/* Empty dashboard message */
.gridstack-dashboard .absolute.inset-0 {
  pointer-events: none;
}

/* Ensure proper stacking */
.grid-stack-item.ui-resizable-resizing {
  z-index: 100;
}

/* Fix for widget content overflow */
.widget-container-wrapper.edit-mode {
  overflow: visible;
}

/* ===========================
   11. RESPONSIVE ADJUSTMENTS
   =========================== */

@media (max-width: 1024px) {
  .grid-stack {
    padding: 12px;
  }
  
  .widget-content {
    padding: 12px;
  }
}

@media (max-width: 768px) {
  .grid-stack {
    padding: 8px;
    border-radius: 8px;
  }
  
  .widget-container-wrapper {
    border-radius: 6px;
  }
  
  .widget-content {
    padding: 8px;
  }
}